--https://ru.wikipedia.org/wiki/%D0%90%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%BC_%D0%93%D0%B0%D1%83%D1%81%D1%81%D0%B0_%D0%B2%D1%8B%D1%87%D0%B8%D1%81%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F_%D0%B4%D0%B0%D1%82%D1%8B_%D0%9F%D0%B0%D1%81%D1%85%D0%B8
--SQLQuery7 - GetEasterDate.sql
USE PV_319_Import;
GO

CREATE FUNCTION GetEasterDate(@year SMALLINT)RETURNS DATE
BEGIN
	DECLARE @a	AS	SMALLINT = @year%19;
	DECLARE @b	AS	SMALLINT = @year%4;
	DECLARE @c	AS	SMALLINT = @year%7;
	DECLARE @d	AS	SMALLINT = (19*@a + 15)%30;
	DECLARE @e	AS	SMALLINT = (2*@b + 4*@c + 6*@d + 6) % 7;
	DECLARE @f	AS	SMALLINT = @d + @e;
	RETURN	IIF(@f <= 26, DATEFROMPARTS(@year, 4, 4+@f), DATEFROMPARTS(@year, 5, @f-26));
END